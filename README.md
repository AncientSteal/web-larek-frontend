# Проектная работа "Веб-ларек"
Интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и делать заказы
[Посмотреть проект Web-ларёк.]()
## Оглавление
- [Описание](#описание)
- [Запуск](#установка-и-запуск)
- [Сборка](#сборка)

## Описание 
Архитектура проекта по принципу MVP (Model-View-Presenter), обеспечивает четкое разделение ответственностей между классами Model и View каждый класс выполняет свою определенную роль:

Model - работа с загрузкой данных по API, сохранение и работа с данными полученными от пользователя.

View - отображает интерфейс для взаимодействия с пользователем, отлавливает и сообщает о произошедших событиях.

EventEmitter выступает в роли Представителя (Presenter) - связывает модели данных с отображением интерфейсов при сработке какого нибудь события, управляя взаимодействием между ними.

### Стек технологий:
HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами
- src/types/index.ts — файл с основными типами
- src/index.ts — точка входа приложения

## Описание базовых классов
### Api
Реализует работу по запросам к серверу.
Содержит типы для списка ответов и запросов к серверу.
Свойства класса
baseUrl: Базовый URL для API, который передается в конструктор.
options: Опции запросов, по умолчанию заголовок Content-Type в application/json.

Методы класса:
handleResponse - Обрабатывает ответ от сервера, если ответ успешный, возвращает JSON-данные, если произошла ошибка, возвращает отклоненный промис с сообщением об ошибке.

get - Выполняет GET-запрос по указанному URI, использует метод fetch, передавая базовый URL и параметры запроса и возвращает результат обработки ответа через метод handleResponse.
post - Выполняет POST-запрос по указанному URI с переданными данными, они переводятся в JSON-формат, использует метод fetch и обрабатывает ответ через handleResponse.

----------------------------------------------------------------------------------
### Классы Model
Здесь содержится внутренняя логика работы компонентов.

#### Класс `ApiModel` передаёт и получает данные от сервера.
Блок отвечает за получение карточек с сервера и за отправку заказа пользователя серверу.

#### Класс `BasketModel` работает с товарами в корзине.
Отвечает за массив товаров в корзине, работу с этим массивом, удаление товара, 
получение информации о количестве товаров, суммарной стоимости, очищение корзины.

#### Класс `DataModel` отвечает за массив карточек на странице.
Работает с карточками на главной странице, сохраняет массив карточек после
их загрузки с сервера, отвечает за выбор карточки из массива, за передачу массива карточек.

#### Класс `FormModel` проверяет данные пользователя.
Отвечает за сохранение вводимых в формы данных, которые потом проверяет
на корректность, работает с ошибками и их содержимым.

------------------------------------------------------------------------------------
### Классы Views позволяют отображать элементы страницы для взаимодействовия с пользователем.
#### Класс `Basket` управляет отображением корзины.
Будет содержать массив выбранных товаров либо строку об их отсутствии.
Метод будет выводить общую сумму всех товаров в корзине.
Управляет отображением количества товаров на иконке корзины.
#### Класс `BasketItem` управляет отображением элемента из массива товаров в корзине.
Выводит название, цену товара, его номер в массиве, также кнопку удаления товара.

#### Класс `Order` управляет отображением содержимого модального окна заказа, где можно принять от пользователя метод оплаты и адрес.
#### Класс `Contacts` управляет отображением содержимого модального окна, где можно принять от пользователя номер телефона и почту.
Работают с отображением кнопок способа оплаты, кнопки "далее" и "оплатить", полей ввода, выводят сообщения об ошибках пользователю.

#### Класс `Card` управляет отображением карточки товара на странице.
Отображает массив товаров, названия, изображения, категории, цены.
#### Класс `CardPreview` управляет отображением развёрнутой карточки товара.
Отображает полную карточку товара, название, изображение, категорию, цену, описание, управляет кнопкой добавления в корзину.

#### Класс `Modal` управляет отображением модальных окон.
Отрисовывает модальные окна по шаблонам, с перданым ему содержимым и кнопкой закрытия окна.

#### Класс `Success` управляет отображением успешного заказа.
Отображает онформацию об успешном заказе и количеством потраченных синапсов.

------------------------------------------------------------------------------------
### EventEmitter
Класс EventEmitter
Обеспечивает работу событий, реализует паттерн «Observer/Наблюдатель», его методы позволяют управлять слушателями событий.

Методы:
on - для подписки на событие.
off - для отписки от события.
emit - уведомления подписчиков о наступлении события, эмитирует событие.
onAll - подписка на все события.
offAll - сброс всех подписчиков.
trigger - генерирует заданное событие с заданными аргументами.

## Типы данных
В проекте используются следующие основные типы и интерфейсы:

**Api**
ApiListResponse описывает ответ от API, содержащий общее количество элементов (total) и массив элементов (items) указанного типа.
ApiPostMethods представляет допустимые HTTP-методы для POST-запросов, 'POST', 'PUT' и 'DELETE'.
**FormErrors**
Тип ошибки, который хранит значения ключей и сами ключи полей ввода.

## Интерфейсы
### **IApiModel**
Описывает cdn - ссылку на изображение, items - массив товаров, 
getListProductCard - метод получения массива товаров, postOrderLot - метод отправки данных заказа пользователя.

### **IBasketModel**
Описывает basketProducts - массив товаров в корзине, методы getCounter и getSumAllProducts для получения 
количества и общей стоимости товаров в корзине, setSelectedСard - для добавления выбранной карточки в корзину,
deleteCardBasket и clearBasketProducts для удаления товара и очистки всей корзины.

### **IDataModel**
Описывает productCards - список товаров, selectedСard - выбранный товар и метод setPreview для открытия карточки товара.

### **IFormModel**
Описывает  payment, address, email, phone - соответствующие поля формы, total и items - сумарная стоимость и массив товаров,
методы setOrderAddress и setOrderData для сохранения введённых данных, validateOrder и validateContacts для 
проверки введённх данных, и getOrderLot для получения данных заказа.

### **IProductItem** 
Описывает данные товара: id, description, image, title, category, price.

### **IOrderForm**
Описывает поля формы: payment - спсоб оплаты, address - адрес, phone - телефон, email - почту,
и total - суммарная стоимость покупки.

### **IOrderLot**
Описывает соответствующие поля заказа: payment address email phone, total - стоимость заказа и items - массив купленных товаров.

### **IOrderResult**
Описывает ответ от сервера о заказе, id - индекс ответа, total - стоимость.

### **IActions**
Описывает обработчик события onClick, который будет добавляться к событиям.

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```