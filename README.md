# Проектная работа "Веб-ларек"
Интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и делать заказы
[Посмотреть проект Web-ларёк.]()
## Оглавление
- [Запуск](#Установка и запуск)
- [Сборка](#сборка)
- [Описание](#описание)

## Описание 
Архитектура проекта по принципу MVP (Model-View-Presenter), обеспечивает четкое разделение ответственностей между классами Model и View каждый класс выполняет свою определенную роль:

Model - работа с загрузкой данных по API, сохранение и работа с данными полученными от пользователя.

View - отображает интерфейс для взаимодействия с пользователем, отлавливает и сообщает о произошедших событиях.

EventEmitter выступает в роли Представителя (Presenter) - связывает модели данных с отображением интерфейсов при сработке какого нибудь события, управляя взаимодействием между ними.
### Стек технологий:
HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Описание базовых классов
### Api
Реализует работу по запросам к серверу.
Содержит типы для списка ответов и запросов к серверу.
Свойства класса
baseUrl: Базовый URL для API, который передается в конструктор.
options: Опции запросов, по умолчанию заголовок Content-Type в application/json.

Методы класса:
handleResponse - Обрабатывает ответ от сервера, если ответ успешный, возвращает JSON-данные, если произошла ошибка, возвращает отклоненный промис с сообщением об ошибке.

get - Выполняет GET-запрос по указанному URI, использует метод fetch, передавая базовый URL и параметры запроса и возвращает результат обработки ответа через метод handleResponse.
post - Выполняет POST-запрос по указанному URI с переданными данными, они переводятся в JSON-формат, использует метод fetch и обрабатывает ответ через handleResponse.

----------------------------------------------------------------------------------
### Классы Model
#### Класс `ApiModel` наследуется от класса `Api`, передаёт и получает данные от сервера.
Методы:
Получаем массив карточек с сервера.

#### Класс `BasketModel` хранит и работает с данными полученными от пользователя.
Методы:
Возращение количества товаров в корзине.
Суммирование и отображение суммы всех товаров.
Добавление и удаление товара из корзины.
Удаление всех товаров, после покупки.

#### Класс `Model` принимает и хранит данные продуктов полученные с сервера.

#### Класс `FormModel` хранит данные полученные от пользователя и проверяет их.
Методы:
Сохранение адреса, номера телефона и почты пользователя.
Валидация адреса, телефона и почты, способа оплаты.
Вовращает объект данных пользователя с выбранными товарами.

------------------------------------------------------------------------------------
### Классы Views позволяют отображать элементы страницы для взаимодействовия с пользователем.
#### Класс `Order` управляет отображением содержимого модального окна заказа, где можно принять от пользователя метод оплаты и адрес.
#### Класс `Contacts` управляет отображением содержимого модального окна, где можно принять от пользователя номер телефона и почту.
Представляют заказ пользователя. Функции:
Хранение информации о заказе (товары, адрес доставки, способ оплаты, телефон и почта).
Метод для обработки заказа и подтверждения оплаты.

#### Класс `Basket` управляет отображением корзины.
Будет содержать массив выбранных товаров либо строку об их отсутствии.
Метод будет выводить общую сумму всех товаров в корзине.
#### Класс `BasketItem` управляет отображением элементов(продуктов) в корзине.
Будет элементом товаров в массиве выбранных в корзине, из которого получим строку с его ценой. 

#### Класс `Card` управляет отображением карточки товара на странице.
#### Класс `CardPreview` наследуется от класса `Card` и управляет отображением развёрнутой карточки товара, позволит добавить карточку в корзину.
Методы будут отображать категорию, цену, название и описание товара, его изображение.

#### Класс `Success` управляет отображением удачного заказа в модальном окне.
#### Класс `Modal` управляет отображением модальных окон.
Методы:
- open - отображает модальное окон.
- close - закрывает модальное окно.

------------------------------------------------------------------------------------
### EventEmitter
Класс EventEmitter
Обеспечивает работу событий, реализует паттерн «Observer/Наблюдатель», его методы позволяют устанавливать и снимать слушатели событий, вызвать слушатели при возникновении события.
Методы:

on - для подписки на событие.
off - для отписки от события.
emit - уведомления подписчиков о наступлении события соответственно.
onAll - подписка на все события.
offAll - сброс всех подписчиков.
trigger - генерирует заданное событие с заданными аргументами, например чтобы передавать его в качестве обработчика события в другим классам, так они будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.

## Типы данных
В проекте используются следующие основные типы и интерфейсы:

**Api**
ApiListResponse описывает ответ от API, содержащий общее количество элементов (total) и массив элементов (items) указанного типа.
ApiPostMethods представляет допустимые HTTP-методы для POST-запросов, 'POST', 'PUT' и 'DELETE'.
- **IProduct** — описание товара:
  - `id: string` — уникальный идентификатор товара.
  - `category: string` — категория товара.
  - `title: string` — название.
  - `description: string` — описание.
  - `image: string` — URL изображения.
  - `price: number | null` — цена.